<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>verdis | movies</title>
    <link rel="shortcut icon" href="/assets/img/fav.png" type="image/x-icon">
    <link rel="stylesheet" href="/assets/css/colors.css">
    <link rel="stylesheet" href="/assets/css/elements.css">
    <link rel="stylesheet" href="/assets/css/font.css">
    <link rel="stylesheet" href="/assets/icons/fonts/remixicon.css">
</head>
<body style="margin: 0;">
    <style>
         ::-webkit-scrollbar { scrollbar-width: none !important; }
    </style>

    

    <iframe src="/pages/movies.html" style="width: 100vw; height: 100vh; margin: 0;" frameborder="0"></iframe>
    <nav>
        <ul id="nav-ul" class="">
            <div class="container" style="display: flex; flex-direction: row;">
                <div class="top-nav">
                    <li>
                        <a class="active" href="/">
                            <i class="ri ri-home-4-line"></i>
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="/pages/games.html">
                            <i class="ri ri-gamepad-line"></i>
                            Games
                        </a>
                    </li>
                    <li>
                        <a href="/pages/apps.html">
                            <i class="ri ri-apps-line"></i>
                            Apps
                        </a>
                    </li>
                    <li>
                        <a href="/pages/browser.html">
                            <i class="ri ri-seo-line"></i>
                            Browser
                        </a>
                    </li>
                    <li>
                        <a href="/pages/movieframe.html">
                            <i class="ri ri-film-line"></i>
                            Movies
                        </a>
                    </li>
                </div>
                <!--
                                <li>
                                    <a href="javascript:nav('yt')">
                                        <i class="ri ri-video-line"></i>
                                        Youtube UB
                                    </a>
                                </li>
                                -->
                <div>
                    <li>
                        <a style="cursor: pointer;" onclick="window.open('https://discord.gg/hUYzETaQ9U', '_blank')">
                            <i class="ri ri-discord-fill"></i>
                            Discord
                        </a>
                    </li>
                    <li>
                        <a href="/pages/partners.html">
                            <i class="ri ri-shake-hands-fill"></i>
                            Partners
                        </a>
                    </li>
                    <li>
                        <a href="/pages/settings.html">
                            <i class="ri ri-settings-3-line"></i>
                            Settings
                        </a>
                    </li>
                    <li>
                        <a style="cursor: pointer;"
                            onclick="window.open('https://github.com/x8rr/verdis/releases/latest', '_blank')">
                            <i class="ri ri-github-fill"></i>
                            v1.11
                        </a>
                    </li>
                    <!--
                        <li>
                            <a href="javascript:collapseNav()">
                                <i class="ri ri-arrow-left-s-line" style="display: inline-block;" id="cBtn"></i>
                                Collapse
                            </a>
                        </li>
                        -->
                </div>
            </div>
        </ul>
    </nav>

    <script defer>
        const ul = document.getElementById("nav-ul")

        document.querySelectorAll("li a").forEach(link => {
            link.addEventListener("click", function () {
                document.querySelectorAll("li a").forEach(l => l.classList.remove("active"));
                this.classList.add("active");
            });
        });

        window.addEventListener("keydown", (e) => {
            if (e.ctrlKey && e.key === "m") {
                console.log("Key pressed")
                e.preventDefault()
                if (!ul.classList.contains("active")) {
                    ul.classList.add("active")
                    const blurr = document.createElement("div")
                    blurr.classList.add("bluroverlay")
                    document.body.append(blurr)
                    blurr.addEventListener("click", () => {
                        blurr.remove()
                        ul.classList.remove("active")
                    })
                } else {
                    ul.classList.remove("active")
                    const blurr = document.querySelector(".bluroverlay")
                    blurr.remove()
                }
            }
        })

        // MAXIMUM AGGRESSIVE popup blocking - NO popups allowed from movie page
        
        // Override window.open completely
        window.open = function () { 
            console.warn("ðŸš« Popup blocked on movies page (window.open)"); 
            return null; 
        };
        
        // Block ALL clicks that might trigger navigation
        document.addEventListener('click', function(e) {
            let element = e.target;
            let depth = 0;
            
            // Traverse up the DOM tree
            while (element && depth < 10) {
                // Special handling for nav links
                if (element.closest('nav, .nav-logo')) {
                    return; // Allow navigation bar clicks
                }
                
                // Block ALL anchor tags with target="_blank" or external hrefs
                if (element.tagName === 'A') {
                    const target = element.getAttribute('target');
                    const href = element.getAttribute('href');
                    
                    // Allow ONLY specific whitelisted external links and internal navigation
                    const isInternal = !href || href.startsWith('/') || href.startsWith('#') || href.startsWith('javascript:');
                    const isWhitelisted = href && (href.includes('discord.gg/hUYzETaQ9U') || href.includes('github.com/x8rr/verdis'));
                    
                    if ((!isInternal && !isWhitelisted) || (target === '_blank' && !isWhitelisted)) {
                        e.preventDefault();
                        e.stopPropagation();
                        e.stopImmediatePropagation();
                        console.warn('ðŸš« Popup blocked on movies page (link):', href);
                        return false;
                    }
                }
                element = element.parentElement;
                depth++;
            }
        }, true);
        
        // Block mousedown on ALL mouse buttons
        document.addEventListener('mousedown', function(e) {
            // Allow in nav area
            if (e.target.closest('nav, .nav-logo')) {
                return;
            }
            
            // Block middle button and any modifier keys that might open new tabs
            if (e.button === 1 || e.ctrlKey || e.metaKey || e.shiftKey) {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                console.warn('ðŸš« Popup blocked on movies page (mousedown)');
                return false;
            }
        }, true);
        
        // Block auxclick (middle click and other auxiliary buttons)
        document.addEventListener('auxclick', function(e) {
            if (!e.target.closest('nav, .nav-logo')) {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                console.warn('ðŸš« Popup blocked on movies page (auxclick)');
                return false;
            }
        }, true);
        
        // Block contextmenu to prevent "Open in new tab"
        document.addEventListener('contextmenu', function(e) {
            // Allow right-click in nav and on video elements
            if (!e.target.closest('nav, .nav-logo, video, iframe')) {
                e.preventDefault();
                e.stopPropagation();
                console.warn('ðŸš« Context menu blocked on movies page');
                return false;
            }
        }, true);
        
        // Prevent any beforeunload popups
        window.addEventListener('beforeunload', function(e) {
            e.preventDefault();
            return undefined;
        });
        
        // Monitor for dynamically created iframes/windows
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                mutation.addedNodes.forEach(function(node) {
                    if (node.tagName === 'IFRAME') {
                        // Check if it's not our movie iframe
                        const src = node.src || '';
                        if (!src.includes('vidsrc') && !src.includes('embed') && !src.includes('iframe')) {
                            console.warn('ðŸš« Suspicious iframe blocked:', src);
                            node.remove();
                        }
                    }
                });
            });
        });
        observer.observe(document.body, { childList: true, subtree: true });
    </script>

    <div class="nav-logo">
        <img src="/assets/img/fav.png" alt="" onclick="
                    ul.classList.add('active');
                    const blurr = document.createElement('div')
                    blurr.classList.add('bluroverlay')
                    document.body.append(blurr)
                    blurr.addEventListener('click', () => {
                        ul.classList.remove('active')
                        blurr.remove()
                    })
                ">
    </div>
</body>
</html>